<!--
  This template loads for the 'tab.friend-detail' state (app.js)
  'friend' is a $scope variable created in the FriendsCtrl controller (controllers.js)
  The FriendsCtrl pulls data from the Friends service (service.js)
  The Friends service returns an array of friend data
-->
<ion-view view-title="Deals">
    <ion-content class="padding">
        <div class="list" ng-repeat="item in resultValue=(deals)" >
            <a class="item item-icon-left" href="#" on-hold="detail({{item.deal}})">
                <i ng-if="item.deal.discount_amount>=100" class="icon ion-ios-star"></i>
                <i ng-if="item.deal.discount_amount>=50" class="icon ion-ios-star-half"></i>
                <i ng-if="item.deal.discount_amount<50" class="icon ion-ios-star-outline"></i>
                {{item.deal.short_title}}
                <span ng-if="item.deal.discount_amount>0" class="badge badge-positive">${{item.deal.discount_amount}}</span>
                <span ng-if="item.deal.discount_amount<=0" class="badge badge-assertive">${{item.deal.discount_amount}}</span>
            </a>
        </div>
        <div class="item item-divider">
            Total saving:
            <span ng-if="(resultValue | sumOfValue:'discount_amount')>0" class="badge badge-balanced">${{resultValue | sumOfValue:'discount_amount'}}</span>
            <span ng-if="(resultValue | sumOfValue:'discount_amount')<=0" class="badge badge-assertive">${{resultValue | sumOfValue:'discount_amount'}}</span>
        </div>
    </ion-content>
</ion-view>
